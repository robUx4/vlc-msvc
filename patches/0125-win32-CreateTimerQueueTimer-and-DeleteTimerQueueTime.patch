From e086253754385b5d28881174b821ffb1dec6cf05 Mon Sep 17 00:00:00 2001
From: Steve Lhomme <robux4@gmail.com>
Date: Fri, 31 Jul 2015 16:55:02 +0200
Subject: [PATCH 125/128] win32: CreateTimerQueueTimer and
 DeleteTimerQueueTimer not available on Winstore
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: RÃ©mi Denis-Courmont <remi@remlab.net>
---
 src/win32/thread.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/src/win32/thread.c b/src/win32/thread.c
index ee6e706..fe87941 100644
--- a/src/win32/thread.c
+++ b/src/win32/thread.c
@@ -1012,8 +1012,10 @@ int vlc_timer_create (vlc_timer_t *id, void (*func) (void *), void *data)
 
 void vlc_timer_destroy (vlc_timer_t timer)
 {
+#if !VLC_WINSTORE_APP
     if (timer->handle != INVALID_HANDLE_VALUE)
         DeleteTimerQueueTimer (NULL, timer->handle, INVALID_HANDLE_VALUE);
+#endif
     free (timer);
 }
 
@@ -1022,7 +1024,9 @@ void vlc_timer_schedule (vlc_timer_t timer, bool absolute,
 {
     if (timer->handle != INVALID_HANDLE_VALUE)
     {
+#if !VLC_WINSTORE_APP
         DeleteTimerQueueTimer (NULL, timer->handle, NULL);
+#endif
         timer->handle = INVALID_HANDLE_VALUE;
     }
     if (value == 0)
@@ -1033,8 +1037,10 @@ void vlc_timer_schedule (vlc_timer_t timer, bool absolute,
     value = (value + 999) / 1000;
     interval = (interval + 999) / 1000;
 
+#if !VLC_WINSTORE_APP
     if (!CreateTimerQueueTimer (&timer->handle, NULL, vlc_timer_do, timer,
                                 value, interval, WT_EXECUTEDEFAULT))
+#endif
         abort ();
 }
 
-- 
1.9.5.msysgit.1

