From 9b1f2d493edfa11911adee57b3094a9c1f4fa7e0 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Hugo=20Beauz=C3=A9e-Luyssen?= <hugo@beauzee.fr>
Date: Tue, 21 Oct 2014 14:17:30 +0200
Subject: [PATCH 004/128] modules: Disable warning cpp directive when using
 msvc

---
 modules/access/bluray.c        | 2 +-
 modules/codec/crystalhd.c      | 4 +++-
 modules/control/win_msg.c      | 4 +++-
 modules/demux/avformat/demux.c | 2 ++
 modules/demux/ogg.c            | 2 ++
 modules/lua/libs/playlist.c    | 2 ++
 6 files changed, 13 insertions(+), 3 deletions(-)

diff --git a/modules/access/bluray.c b/modules/access/bluray.c
index d218f91..970ff8d 100644
--- a/modules/access/bluray.c
+++ b/modules/access/bluray.c
@@ -265,7 +265,7 @@ static void FindMountPoint(char **file)
                 }
         }
     }
-#else
+#elif !defined(_MSC_VER)
 # warning Disc device to mount point not implemented
     VLC_UNUSED( device );
 #endif
diff --git a/modules/codec/crystalhd.c b/modules/codec/crystalhd.c
index d3b99ba..f12bc87 100644
--- a/modules/codec/crystalhd.c
+++ b/modules/codec/crystalhd.c
@@ -62,7 +62,9 @@
    And forcing users to install the right dll at the right place will not work
    Therefore, we need to dl_open and resolve the symbols */
 #ifdef USE_DL_OPENING
-#  warning DLL opening mode
+#  ifndef _MSC_VER
+#   warning DLL opening mode
+#  endif
 #  define BC_FUNC( a ) Our ## a
 #  define BC_FUNC_PSYS( a ) p_sys->Our ## a
 #else
diff --git a/modules/control/win_msg.c b/modules/control/win_msg.c
index aa18423..d433e59 100644
--- a/modules/control/win_msg.c
+++ b/modules/control/win_msg.c
@@ -92,7 +92,9 @@ static LRESULT CALLBACK WMCOPYWNDPROC(HWND hwnd, UINT uMsg,
                     i_options++;
                 }
 
-#warning URI conversion must be done in calling process instead!
+#ifndef _MSC_VER
+# warning URI conversion must be done in calling process instead!
+#endif
                 /* FIXME: This breaks relative paths if calling vlc.exe is
                  * started from a different working directory. */
                 char *psz_URI = NULL;
diff --git a/modules/demux/avformat/demux.c b/modules/demux/avformat/demux.c
index b680a99..8d71c86 100644
--- a/modules/demux/avformat/demux.c
+++ b/modules/demux/avformat/demux.c
@@ -386,7 +386,9 @@ int OpenDemux( vlc_object_t *p_this )
 
             get_rotation(&fmt, s);
 
+#if !defined(_MSC_VER)
 # warning FIXME: implement palette transmission
+#endif
             psz_type = "video";
             fmt.video.i_frame_rate = cc->time_base.den;
             fmt.video.i_frame_rate_base = cc->time_base.num * __MAX( cc->ticks_per_frame, 1 );
diff --git a/modules/demux/ogg.c b/modules/demux/ogg.c
index 905a637..384efb0 100644
--- a/modules/demux/ogg.c
+++ b/modules/demux/ogg.c
@@ -1273,7 +1273,9 @@ static void Ogg_DecodePacket( demux_t *p_demux,
             }
             else
             {
+#ifndef _MSC_VER
 #warning Memory leak
+#endif
                 p_stream->i_headers = 0;
                 p_stream->p_headers = NULL;
                 free( p_org );
diff --git a/modules/lua/libs/playlist.c b/modules/lua/libs/playlist.c
index 1159262..5b59ad9 100644
--- a/modules/lua/libs/playlist.c
+++ b/modules/lua/libs/playlist.c
@@ -323,7 +323,9 @@ static int vlclua_playlist_current( lua_State *L )
         vlc_object_release( p_input );
     }
 
+#ifndef _MSC_VER
 #warning Indexing input items by ID is unsafe,
+#endif
     lua_pushinteger( L, id );
     return 1;
 }
-- 
1.9.5.msysgit.1

