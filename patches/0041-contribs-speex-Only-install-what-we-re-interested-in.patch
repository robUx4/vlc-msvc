From b624b6508706efb10cf2854d0fc28f0b95b6c7d5 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Hugo=20Beauz=C3=A9e-Luyssen?= <hugo@beauzee.fr>
Date: Thu, 20 Nov 2014 16:22:17 +0100
Subject: [PATCH 041/128] contribs: speex: Only install what we're interested
 in

---
 contrib/src/speex/msvc.patch | 11 +++++++++++
 contrib/src/speex/rules.mak  |  3 +++
 2 files changed, 14 insertions(+)
 create mode 100644 contrib/src/speex/msvc.patch

diff --git a/contrib/src/speex/msvc.patch b/contrib/src/speex/msvc.patch
new file mode 100644
index 0000000..249466c
--- /dev/null
+++ b/contrib/src/speex/msvc.patch
@@ -0,0 +1,11 @@
+--- speex/speex.pc.in   2014-03-12 20:12:19.000000000 +0100
++++ speex/speex.pc.in.msvc      2015-08-10 11:38:18.819847700 +0200
+@@ -10,6 +10,6 @@
+ Version: @SPEEX_VERSION@
+ Requires:
+ Conflicts:
+-Libs: -L${libdir} -lspeex
++Libs: -L${libdir} -lspeex.lib
+ Libs.private: @LIBM@
+ Cflags: -I${includedir}
+
diff --git a/contrib/src/speex/rules.mak b/contrib/src/speex/rules.mak
index a5f003c..0d882ac 100644
--- a/contrib/src/speex/rules.mak
+++ b/contrib/src/speex/rules.mak
@@ -15,6 +15,9 @@ $(TARBALLS)/speex-$(SPEEX_VERSION).tar.gz:
 
 speex: speex-$(SPEEX_VERSION).tar.gz .sum-speex
 	$(UNPACK)
+ifdef HAVE_VISUALSTUDIO
+	$(APPLY) $(SRC)/speex/msvc.patch
+endif
 	$(MOVE)
 
 SPEEX_CONF := --disable-binaries
-- 
1.9.5.msysgit.1

