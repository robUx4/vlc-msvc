From c272e63f60c2df54f5db312770a6e90591c89da4 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Hugo=20Beauz=C3=A9e-Luyssen?= <hugo@beauzee.fr>
Date: Wed, 22 Oct 2014 12:21:31 +0200
Subject: [PATCH 14/55] vout: Fix build when using MSVC

---
 modules/video_output/msw/events.c     | 4 ++++
 modules/video_output/msw/win32touch.h | 5 +++++
 2 files changed, 9 insertions(+)

diff --git a/modules/video_output/msw/events.c b/modules/video_output/msw/events.c
index 42e7064..7708ec5 100644
--- a/modules/video_output/msw/events.c
+++ b/modules/video_output/msw/events.c
@@ -26,6 +26,10 @@
  *             a window and the handling of its messages (events).
  *****************************************************************************/
 
+#ifdef _MSC_VER
+# define HAVE_STRUCT_POLLFD
+#endif
+
 #ifdef HAVE_CONFIG_H
 # include "config.h"
 #endif
diff --git a/modules/video_output/msw/win32touch.h b/modules/video_output/msw/win32touch.h
index d3f9128..e943787 100644
--- a/modules/video_output/msw/win32touch.h
+++ b/modules/video_output/msw/win32touch.h
@@ -31,6 +31,11 @@
 # include <windows.h>
 # include <winuser.h>
 
+#ifdef _MSC_VER
+// Since we temporarily forced windows version to Vista, poll() is now available
+# define HAVE_STRUCT_POLLFD
+#endif
+
 #ifdef HAVE_CONFIG_H
 # include "config.h"
 #endif
-- 
2.1.1

