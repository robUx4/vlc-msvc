From c5871eda9a7bf8f810fe5820ace71fc5a9305a92 Mon Sep 17 00:00:00 2001
From: Steve Lhomme <robUx4@gmail.com>
Date: Fri, 31 Jul 2015 10:44:04 +0200
Subject: [PATCH 115/128] contribs: only force ass optimizations when
 WITH_OPTIMIZATION is set

otherwise bring the debug symbols
---
 contrib/src/ass/rules.mak | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/contrib/src/ass/rules.mak b/contrib/src/ass/rules.mak
index a71c0ed..be528a9 100644
--- a/contrib/src/ass/rules.mak
+++ b/contrib/src/ass/rules.mak
@@ -58,8 +58,14 @@ else
 ASS_CONF += --disable-harfbuzz
 endif
 
+ifdef WITH_OPTIMIZATION
+ASS_CFLAGS += -O3
+else
+ASS_CFLAGS += -g
+endif
+
 .ass: libass
 	$(RECONF)
-	cd $< && $(HOSTVARS) CFLAGS="$(CFLAGS) -O3" ./configure $(HOSTCONF) $(ASS_CONF)
+	cd $< && $(HOSTVARS) CFLAGS="$(CFLAGS) $(ASS_CFLAGS)" ./configure $(HOSTCONF) $(ASS_CONF)
 	cd $< && $(MAKE) install
 	touch $@
-- 
1.9.5.msysgit.1

