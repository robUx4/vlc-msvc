From 170282b0828d244efe08d812c7b369f289459c3c Mon Sep 17 00:00:00 2001
From: Steve Lhomme <robUx4@gmail.com>
Date: Wed, 12 Aug 2015 11:10:54 +0200
Subject: [PATCH 120/128] taglib: add m4v support

---
 contrib/src/taglib/m4v.patch | 29 +++++++++++++++++++++++++++++
 contrib/src/taglib/rules.mak |  1 +
 2 files changed, 30 insertions(+)
 create mode 100644 contrib/src/taglib/m4v.patch

diff --git a/contrib/src/taglib/m4v.patch b/contrib/src/taglib/m4v.patch
new file mode 100644
index 0000000..03da676
--- /dev/null
+++ b/contrib/src/taglib/m4v.patch
@@ -0,0 +1,29 @@
+--- taglib/taglib/fileref.cpp   2015-08-10 18:32:56.961588900 +0200
++++ taglib/taglib/fileref.cpp.m4v       2015-08-12 11:00:44.933793600 +0200
+@@ -160,6 +160,7 @@
+   l.append("m4p");
+   l.append("3g2");
+   l.append("mp4");
++  l.append("m4v");
+   l.append("wma");
+   l.append("asf");
+   l.append("aif");
+@@ -266,7 +267,7 @@
+       return new Ogg::Opus::File(fileName, readAudioProperties, audioPropertiesStyle);
+     if(ext == "TTA")
+       return new TrueAudio::File(fileName, readAudioProperties, audioPropertiesStyle);
+-    if(ext == "M4A" || ext == "M4R" || ext == "M4B" || ext == "M4P" || ext == "MP4" || ext == "3G2")
++    if(ext == "M4A" || ext == "M4R" || ext == "M4B" || ext == "M4P" || ext == "MP4" || ext == "3G2" || ext == "M4V")
+       return new MP4::File(fileName, readAudioProperties, audioPropertiesStyle);
+     if(ext == "WMA" || ext == "ASF")
+       return new ASF::File(fileName, readAudioProperties, audioPropertiesStyle);
+@@ -340,7 +341,7 @@
+         return new Ogg::Opus::File(ioStream, readAudioProperties, audioPropertiesStyle);
+       if(ext == "TTA")
+         return new TrueAudio::File(ioStream, readAudioProperties, audioPropertiesStyle);
+-      if(ext == "M4A" || ext == "M4R" || ext == "M4B" || ext == "M4P" || ext == "MP4" || ext == "3G2")
++      if(ext == "M4A" || ext == "M4R" || ext == "M4B" || ext == "M4P" || ext == "MP4" || ext == "3G2" || ext == "M4V")
+         return new MP4::File(ioStream, readAudioProperties, audioPropertiesStyle);
+       if(ext == "WMA" || ext == "ASF")
+         return new ASF::File(ioStream, readAudioProperties, audioPropertiesStyle);
+
diff --git a/contrib/src/taglib/rules.mak b/contrib/src/taglib/rules.mak
index c3ecf7a..0b51022 100644
--- a/contrib/src/taglib/rules.mak
+++ b/contrib/src/taglib/rules.mak
@@ -18,6 +18,7 @@ taglib: taglib-$(TAGLIB_VERSION).tar.gz .sum-taglib
 	$(APPLY) $(SRC)/taglib/taglib-pc.patch
 	$(APPLY) $(SRC)/taglib/0002-Rewrote-ByteVector-replace-simpler.patch
 	$(APPLY) $(SRC)/taglib/iostream.patch
+	$(APPLY) $(SRC)/taglib/m4v.patch
 #ifdef HAVE_WINRT
 	$(APPLY) $(SRC)/taglib/unicode.patch
 #endif
-- 
1.9.5.msysgit.1

