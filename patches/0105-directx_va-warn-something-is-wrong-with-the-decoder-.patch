From 263321150deefac734338771077779d62c28d4db Mon Sep 17 00:00:00 2001
From: Steve Lhomme <robUx4@gmail.com>
Date: Thu, 6 Aug 2015 08:33:52 +0200
Subject: [PATCH 105/128] directx_va: warn something is wrong with the decoder
 if no input is available

---
 modules/codec/avcodec/directx_va.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/modules/codec/avcodec/directx_va.c b/modules/codec/avcodec/directx_va.c
index 7696f82..7ff764d 100644
--- a/modules/codec/avcodec/directx_va.c
+++ b/modules/codec/avcodec/directx_va.c
@@ -516,6 +516,10 @@ static int FindVideoServiceConversion(vlc_va_t *va, directx_sys_t *dx_sys, const
     int err = dx_sys->pf_get_input_list(va, &p_list);
     if (err != VLC_SUCCESS)
         return err;
+    if (p_list.count == 0) {
+        msg_Warn( va, "No input format found for HWAccel" );
+        return VLC_EGENERIC;
+    }
 
     err = VLC_EGENERIC;
     /* Retreive supported modes from the decoder service */
-- 
1.9.5.msysgit.1

