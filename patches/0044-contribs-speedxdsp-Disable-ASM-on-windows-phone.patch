From 5dfdccf3507822e4d049eab41ce70f57ad8c8b0a Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Hugo=20Beauz=C3=A9e-Luyssen?= <hugo@beauzee.fr>
Date: Thu, 20 Nov 2014 16:40:17 +0100
Subject: [PATCH 044/128] contribs: speedxdsp: Disable ASM on windows phone

---
 contrib/src/speexdsp/msvc.patch | 11 +++++++++++
 contrib/src/speexdsp/rules.mak  |  3 +++
 2 files changed, 14 insertions(+)
 create mode 100644 contrib/src/speexdsp/msvc.patch

diff --git a/contrib/src/speexdsp/msvc.patch b/contrib/src/speexdsp/msvc.patch
new file mode 100644
index 0000000..73398e9
--- /dev/null
+++ b/contrib/src/speexdsp/msvc.patch
@@ -0,0 +1,11 @@
+--- speexdsp/speexdsp.pc.in     2015-01-03 21:26:24.000000000 +0100
++++ speexdsp/speexdsp.pc.in.msvc        2015-08-10 10:01:57.003233500 +0200
+@@ -10,6 +10,6 @@
+ Version: @PACKAGE_VERSION@
+ Requires: @FFT_PKGCONFIG@
+ Conflicts:
+-Libs: -L${libdir} -lspeexdsp
++Libs: -L${libdir} -lspeexdsp.lib
+ Libs.private: @LIBM@
+ Cflags: -I${includedir}
+
diff --git a/contrib/src/speexdsp/rules.mak b/contrib/src/speexdsp/rules.mak
index e82c6ba..3264b3f 100644
--- a/contrib/src/speexdsp/rules.mak
+++ b/contrib/src/speexdsp/rules.mak
@@ -15,6 +15,9 @@ $(TARBALLS)/speexdsp-$(SPEEXDSP_VERSION).tar.gz:
 
 speexdsp: speexdsp-$(SPEEXDSP_VERSION).tar.gz .sum-speexdsp
 	$(UNPACK)
+ifdef HAVE_VISUALSTUDIO
+	$(APPLY) $(SRC)/speexdsp/msvc.patch
+endif
 	$(MOVE)
 
 SPEEXDSP_CONF := --enable-resample-full-sinc-table --disable-examples
-- 
1.9.5.msysgit.1

