From beb8df09aea49abd1627801aa2476c4ff24ac9c7 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Hugo=20Beauz=C3=A9e-Luyssen?= <hugo@beauzee.fr>
Date: Wed, 22 Oct 2014 12:29:17 +0200
Subject: [PATCH 18/76] Manually disable yadif

Please don't push this
---
 modules/video_filter/Modules.am                |  2 --
 modules/video_filter/deinterlace/deinterlace.c | 10 ++++++----
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/modules/video_filter/Modules.am b/modules/video_filter/Modules.am
index b823e9d..36145e0 100644
--- a/modules/video_filter/Modules.am
+++ b/modules/video_filter/Modules.am
@@ -20,8 +20,6 @@ libdeinterlace_plugin_la_SOURCES = \
 	deinterlace/helpers.c deinterlace/helpers.h \
 	deinterlace/algo_basic.c deinterlace/algo_basic.h \
 	deinterlace/algo_x.c deinterlace/algo_x.h \
-	deinterlace/algo_yadif.c deinterlace/algo_yadif.h \
-	deinterlace/yadif.h deinterlace/yadif_template.h \
 	deinterlace/algo_phosphor.c deinterlace/algo_phosphor.h \
 	deinterlace/algo_ivtc.c deinterlace/algo_ivtc.h
 # inline ASM doesn't build with -O0
diff --git a/modules/video_filter/deinterlace/deinterlace.c b/modules/video_filter/deinterlace/deinterlace.c
index e6a0b0f..cabb80d 100644
--- a/modules/video_filter/deinterlace/deinterlace.c
+++ b/modules/video_filter/deinterlace/deinterlace.c
@@ -184,7 +184,7 @@ static void SetFilterMethod( filter_t *p_filter, const char *mode, bool pack )
                  " for packed format", mode );
         mode = "blend";
     }
-    else if( !strcmp( mode, "yadif" ) )
+    /*else if( !strcmp( mode, "yadif" ) )
     {
         p_sys->i_mode = DEINTERLACE_YADIF;
         p_sys->b_use_frame_history = true;
@@ -194,7 +194,7 @@ static void SetFilterMethod( filter_t *p_filter, const char *mode, bool pack )
         p_sys->i_mode = DEINTERLACE_YADIF2X;
         p_sys->b_double_rate = true;
         p_sys->b_use_frame_history = true;
-    }
+    }*/
     else if( p_sys->chroma->pixel_size > 1 )
     {
         msg_Err( p_filter, "unknown or incompatible deinterlace mode \"%s\""
@@ -472,7 +472,7 @@ picture_t *Deinterlace( filter_t *p_filter, picture_t *p_pic )
             RenderX( p_dst[0], p_pic );
             break;
 
-        case DEINTERLACE_YADIF:
+        /*case DEINTERLACE_YADIF:
             if( RenderYadif( p_filter, p_dst[0], p_pic, 0, 0 ) )
                 goto drop;
             break;
@@ -485,7 +485,7 @@ picture_t *Deinterlace( filter_t *p_filter, picture_t *p_pic )
             if( p_dst[2] )
                 RenderYadif( p_filter, p_dst[2], p_pic, 2, !b_top_field_first );
             break;
-
+        */
         case DEINTERLACE_PHOSPHOR:
             if( RenderPhosphor( p_filter, p_dst[0], 0,
                                 !b_top_field_first ) )
@@ -504,6 +504,8 @@ picture_t *Deinterlace( filter_t *p_filter, picture_t *p_pic )
             if( RenderIVTC( p_filter, p_dst[0] ) )
                 goto drop;
             break;
+        default:
+            assert(false);
     }
 
     /* Set output timestamps, if the algorithm didn't request CUSTOM_PTS
-- 
2.2.0

